@{
    ViewBag.Title = "Home Page";
}
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<!--Reference the SignalR library. -->
<script src="~/Scripts/jquery.signalR-2.3.0.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="http://localhost/DistributedPizza.web/signalr/hubs"></script>
<script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"
        integrity="sha256-xI/qyl9vpwWFOXz7+x/9WkG5j/SVnSw21viy8fWwbeE="
        crossorigin="anonymous"></script>
<script src="~/Scripts/jquery.switcher.min.js"></script>
<script src="~/Scripts/jquery.toast.min.js"></script>
<style>
    #leftHalf {
        background: url('@Url.Content("~/Content/Images/Pizza.jpg")');
        width: 48%;
        position: absolute;
        left: 0px;
        height: 100%;
    }

    #rightHalf {

        width: 52%;
        position: absolute;
        right: 0px;
        height: 100%;
    }

</style>
<link href="~/Content/jquery.toast.min.css" rel="stylesheet" />
<style>
    .switch-button-label {
        float: left;
        font-size: 10pt;
        cursor: pointer;
    }

        .switch-button-label.off {
            color: #adadad;
        }

        .switch-button-label.on {
            color: #0088CC;
        }

    .switch-button-background {
        float: left;
        position: relative;
        background: #ccc;
        border: 1px solid #aaa;
        margin: 1px 10px;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;
        cursor: pointer;
    }

    .switch-button-button {
        position: absolute;
        left: -1px;
        top: -1px;
        background: #FAFAFA;
        border: 1px solid #aaa;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;
    }

    .linear-activity {
        overflow: hidden;
        width: 100%;
        height: 4px;
        background-color: #B3E5FC;
        margin: 20px auto;
    }

    .determinate {
        position: relative;
        max-width: 100%;
        height: 100%;
        -webkit-transition: width 500ms ease-out 1s;
        -moz-transition: width 500ms ease-out 1s;
        -o-transition: width 500ms ease-out 1s;
        transition: width 500ms ease-out 1s;
        background-color: #03A9F4;
    }

    .indeterminate {
        position: relative;
        width: 100%;
        height: 100%;
    }

    .indeterminate:before {
        content: '';
        position: absolute;
        height: 100%;
        background-color: #03A9F4;
        animation: indeterminate_first 1.5s infinite ease-out;
    }

    .indeterminate:after {
        content: '';
        position: absolute;
        height: 100%;
        background-color: #4FC3F7;
        animation: indeterminate_second 1.5s infinite ease-in;
    }

    @@keyframes indeterminate_first {
    0% {
        left: -100%;
        width: 100%;
    }
    100% {
        left: 100%;
        width: 10%;
    }
    }

    @@keyframes indeterminate_second {
    0% {
        left: -150%;
        width: 100%;
    }
    100% {
        left: 100%;
        width: 10%;
    }
    }
</style>
<div>
    <div id="leftHalf">
    </div>
    <div id="rightHalf">
        <div class="linear-activity">
            <div class="indeterminate" style="width: 100%"></div>
        </div>
        <div class="container">
            @*<input type="text" id="message" />
            <input type="button" id="sendmessage" value="Send" />
            <input type="hidden" id="displayname" />
            <ul id="discussion"></ul>*@
        </div>
        <div style="padding-top: 20px; padding-left: 20px;">
            <label style="width: 140px;">Number Of Requests</label><input type="text" id="numberOfRequests" value="1"/>
            <br/>
            <label style="width: 140px;">
                Create Order/s
            </label><input type="button" value="Create Order/s" id="createOneRandomOrder"/>
            <div class="lds-roller">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div></div>
            <br/>
            <br/>
            <label style="width: 140px;">
                Select Queue
            </label>
            <br/>
            <input type="checkbox" name="great" id="great">
            <br/>
            <label style="width: 140px;"> Clean Up the Database</label><input type="button" value="Clean Up DB" id="cleanUpDatabase"/>
        </div>
    </div>
</div>




<script type="text/javascript">

    $(function () {
        var chat = $.connection.chatHub;
        // Create a function that the hub can call to broadcast messages.
        chat.client.broadcastMessage = function (message) {
            // Html encode display name and message.
            var encodedMsg = $('<div />').text(message).html();
            // Add the message to the page.
            $.toast({
                text: message,
                hideAfter: false,
                position : 'top-right' 
            });
        };
        // Get the user name and store it to prepend to messages.
        // Set initial focus to message input box.
        $('#message').focus();
        // Start the connection.
        $.connection.hub.start().done(function () {

        });

    });

    $(document).ready(function () {
        var $loading = $('.linear-activity').hide();
        $(document)
            .ajaxStart(function () {
                $loading.show();
            })
            .ajaxStop(function () {
                $loading.hide();
            });

        var options = {
            on_label: "AmazonSQS",
            off_label: "Kafka"
        };
        $("input#great").switchButton(options);
        $('#createOneRandomOrder').click(function () {

            var data = { NumberOfRequests: $("#numberOfRequests").val(), QueueType: $("input#great").is(':checked') ? 1 : 0 }

            $.ajax({
                url: "home/createRandomOrder",
                type: "POST",
                data: data,
                cache: false,
                async: true,
                success: function (data) {
                    var message;
                    if (data.NumberOfRequests === 1)
                        message = "New Order Generated: " + data.OrderReferenceId;
                    else
                        message = "Number of Order generated: " + data.NumberOfRequests;
                    $.toast({
                        text: message,
                        hideAfter: false,
                        bgColor: '#337ef7',
                        position: 'top-right' 
                    });
                 
                },
                error: function (request, status, error) {
                    $.toast({
                        text: "Houston we have a problem",
                        hideAfter: false,
                        bgColor: '#337ef7',
                        position: 'top-right' 
                    });
                }
            });
        });

        $('#cleanUpDatabase').click(function () {

            $.ajax({
                url: "home/cleanUpDatabase",
                type: "POST",
                cache: false,
                async: true,
                success: function (data) {
                    alert("DB Clean");
                },
                error: function (data) {
                    alert("Houston we have a problem....DB Clean");
                }
            });
        });

    });
</script>